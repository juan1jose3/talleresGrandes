version: '3.8'

services:
  node1:
    build: .
    container_name: node1
    environment:
      - NODE_ID=node1
      - PHRASE_NUMBER=1
      - PHRASE_CONTENT=¡Alegría, hermoso destello de los dioses,
      - NEIGHBORS=node2:5000,node8:5000
      - PORT=5000
    ports:
      - "5001:5000"
    networks:
      - phrase_network
    restart: unless-stopped

  node2:
    build: .
    container_name: node2
    environment:
      - NODE_ID=node2
      - PHRASE_NUMBER=2
      - PHRASE_CONTENT=hija del Elíseo!
      - NEIGHBORS=node1:5000,node3:5000
      - PORT=5000
    ports:
      - "5002:5000"
    networks:
      - phrase_network
    restart: unless-stopped

  node3:
    build: .
    container_name: node3
    environment:
      - NODE_ID=node3
      - PHRASE_NUMBER=3
      - PHRASE_CONTENT=Ebrios de entusiasmo entramos,
      - NEIGHBORS=node2:5000,node4:5000
      - PORT=5000
    ports:
      - "5003:5000"
    networks:
      - phrase_network
    restart: unless-stopped

  node4:
    build: .
    container_name: node4
    environment:
      - NODE_ID=node4
      - PHRASE_NUMBER=4
      - PHRASE_CONTENT=diosa celestial, en tu santuario.
      - NEIGHBORS=node3:5000,node5:5000
      - PORT=5000
    ports:
      - "5004:5000"
    networks:
      - phrase_network
    restart: unless-stopped

  node5:
    build: .
    container_name: node5
    environment:
      - NODE_ID=node5
      - PHRASE_NUMBER=5
      - PHRASE_CONTENT=Tu hechizo une de nuevo
      - NEIGHBORS=node4:5000,node6:5000
      - PORT=5000
    ports:
      - "5005:5000"
    networks:
      - phrase_network
    restart: unless-stopped

  node6:
    build: .
    container_name: node6
    environment:
      - NODE_ID=node6
      - PHRASE_NUMBER=6
      - PHRASE_CONTENT=lo que la acerba costumbre había separado;
      - NEIGHBORS=node5:5000,node7:5000
      - PORT=5000
    ports:
      - "5006:5000"
    networks:
      - phrase_network
    restart: unless-stopped

  node7:
    build: .
    container_name: node7
    environment:
      - NODE_ID=node7
      - PHRASE_NUMBER=7
      - PHRASE_CONTENT=todos los hombres vuelven a ser hermanos
      - NEIGHBORS=node6:5000,node8:5000
      - PORT=5000
    ports:
      - "5007:5000"
    networks:
      - phrase_network
    restart: unless-stopped

  node8:
    build: .
    container_name: node8
    environment:
      - NODE_ID=node8
      - PHRASE_NUMBER=8
      - PHRASE_CONTENT=allí donde tu suave ala se posa.
      - NEIGHBORS=node7:5000,node1:5000
      - PORT=5000
    ports:
      - "5008:5000"
    networks:
      - phrase_network
    restart: unless-stopped

networks:
  phrase_network:
    driver: bridge
