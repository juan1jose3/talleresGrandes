version: '3.8'

services:
  node1:
    build: .
    container_name: node1
    environment:
      - NODE_ID=node1
      - PHRASE_NUMBER=1
      - PHRASE_CONTENT=En un lugar de la Mancha,
      - NEIGHBORS=node10:5000,node2:5000
      - PORT=5000
    ports:
      - "5001:5000"
    networks:
      - phrase_network
    restart: unless-stopped

  node2:
    build: .
    container_name: node2
    environment:
      - NODE_ID=node2
      - PHRASE_NUMBER=2
      - PHRASE_CONTENT=de cuyo nombre no quiero acordarme,
      - NEIGHBORS=node1:5000,node3:5000
      - PORT=5000
    ports:
      - "5002:5000"
    networks:
      - phrase_network
    restart: unless-stopped

  node3:
    build: .
    container_name: node3
    environment:
      - NODE_ID=node3
      - PHRASE_NUMBER=3
      - PHRASE_CONTENT=no ha mucho tiempo que vivía
      - NEIGHBORS=node2:5000,node4:5000
      - PORT=5000
    ports:
      - "5003:5000"
    networks:
      - phrase_network
    restart: unless-stopped

  node4:
    build: .
    container_name: node4
    environment:
      - NODE_ID=node4
      - PHRASE_NUMBER=4
      - PHRASE_CONTENT=un hidalgo de los de lanza en astillero,
      - NEIGHBORS=node3:5000,node5:5000
      - PORT=5000
    ports:
      - "5004:5000"
    networks:
      - phrase_network
    restart: unless-stopped

  node5:
    build: .
    container_name: node5
    environment:
      - NODE_ID=node5
      - PHRASE_NUMBER=5
      - PHRASE_CONTENT=adarga antigua, rocín flaco
      - NEIGHBORS=node4:5000,node6:5000
      - PORT=5000
    ports:
      - "5005:5000"
    networks:
      - phrase_network
    restart: unless-stopped

  node6:
    build: .
    container_name: node6
    environment:
      - NODE_ID=node6
      - PHRASE_NUMBER=6
      - PHRASE_CONTENT=y galgo corredor.
      - NEIGHBORS=node5:5000,node7:5000
      - PORT=5000
    ports:
      - "5006:5000"
    networks:
      - phrase_network
    restart: unless-stopped

  node7:
    build: .
    container_name: node7
    environment:
      - NODE_ID=node7
      - PHRASE_NUMBER=7
      - PHRASE_CONTENT=Una olla de algo más vaca que carnero,
      - NEIGHBORS=node6:5000,node8:5000
      - PORT=5000
    ports:
      - "5007:5000"
    networks:
      - phrase_network
    restart: unless-stopped

  node8:
    build: .
    container_name: node8
    environment:
      - NODE_ID=node8
      - PHRASE_NUMBER=8
      - PHRASE_CONTENT=salpicón las más noches,
      - NEIGHBORS=node7:5000,node9:5000
      - PORT=5000
    ports:
      - "5008:5000"
    networks:
      - phrase_network
    restart: unless-stopped

  node9:
    build: .
    container_name: node9
    environment:
      - NODE_ID=node9
      - PHRASE_NUMBER=9
      - PHRASE_CONTENT=duelos y quebrantos los sábados,
      - NEIGHBORS=node8:5000,node10:5000
      - PORT=5000
    ports:
      - "5009:5000"
    networks:
      - phrase_network
    restart: unless-stopped

  node10:
    build: .
    container_name: node10
    environment:
      - NODE_ID=node10
      - PHRASE_NUMBER=10
      - PHRASE_CONTENT=lentejas los viernes...
      - NEIGHBORS=node9:5000,node1:5000
      - PORT=5000
    ports:
      - "5010:5000"
    networks:
      - phrase_network
    restart: unless-stopped

networks:
  phrase_network:
    driver: bridge
